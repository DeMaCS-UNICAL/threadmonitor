
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>threadmonitor.view.tk &#8212; ThreadMonitor  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/haiku.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../../index.html">
          <span>ThreadMonitor  documentation</span></a></h1>
        <h2 class="heading"><span>threadmonitor.view.tk</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <h1>Source code for threadmonitor.view.tk</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding=utf-8</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageTk</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">threadmonitor.utils</span> <span class="kn">import</span> <span class="n">getResourceFromName</span><span class="p">,</span> <span class="n">overrides</span>


<div class="viewcode-block" id="createAndEmplaceButton"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.createAndEmplaceButton">[docs]</a><span class="k">def</span> <span class="nf">createAndEmplaceButton</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="o">**</span><span class="n">placeArgs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Button</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Istanzia e restituisce un Button creato con i parametri forniti.</span>
<span class="sd">    E&#39; possibile personalizzare ulteriormente il Button creato utilizzando i metodi configure() e place().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="n">command</span><span class="p">)</span>
    <span class="n">ret</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="o">**</span><span class="n">placeArgs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span></div>

<div class="viewcode-block" id="getPhotoImage"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.getPhotoImage">[docs]</a><span class="k">def</span> <span class="nf">getPhotoImage</span><span class="p">(</span><span class="n">resourceName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">resizeParams</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">master</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Istanzia e restituisce una PhotoImage con i parametri forniti.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="n">resourceName</span><span class="p">)</span> <span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="n">resizeParams</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="n">master</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="n">image</span> <span class="p">)</span></div>


<div class="viewcode-block" id="AbstractContainer"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer">[docs]</a><span class="k">class</span> <span class="nc">AbstractContainer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">:</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="n">PhotoImage</span><span class="p">,</span> <span class="n">baseWidth</span><span class="p">,</span> <span class="n">baseHeight</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="n">baseWidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">=</span> <span class="n">baseHeight</span>
    
<div class="viewcode-block" id="AbstractContainer.add"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawSingleThread</span><span class="p">(</span><span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">postAdd</span><span class="p">(</span><span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">)</span></div>

<div class="viewcode-block" id="AbstractContainer.remove"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threadObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">removeCondition</span><span class="p">(</span><span class="n">threadObject</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">deleteSingle</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">threadObject</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">redrawThreads</span><span class="p">()</span></div>

    <span class="c1">#TODO: definire se sia necessario il lock sul redraw</span>
<div class="viewcode-block" id="AbstractContainer.redrawThreads"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.redrawThreads">[docs]</a>    <span class="k">def</span> <span class="nf">redrawThreads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redrawSingle</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span></div>

    <span class="c1">#TODO: definire se sia necessario il lock sul redraw</span>
<div class="viewcode-block" id="AbstractContainer.drawSingleThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.drawSingleThread">[docs]</a>    <span class="k">def</span> <span class="nf">drawSingleThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redrawSingle</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span></div>

<div class="viewcode-block" id="AbstractContainer.removeCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.removeCondition">[docs]</a>    <span class="k">def</span> <span class="nf">removeCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="AbstractContainer.redrawSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.redrawSingle">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">redrawSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>        
        <span class="k">pass</span></div>

<div class="viewcode-block" id="AbstractContainer.deleteSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.deleteSingle">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">deleteSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="AbstractContainer.postAdd"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.AbstractContainer.postAdd">[docs]</a>    <span class="k">def</span> <span class="nf">postAdd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span></div>

    <span class="k">pass</span></div>


<div class="viewcode-block" id="ConditionContainer"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer">[docs]</a><span class="k">class</span> <span class="nc">ConditionContainer</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">conditionContainer</span><span class="p">:</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="n">PhotoImage</span><span class="p">,</span> <span class="n">containerHeight</span><span class="p">,</span> <span class="n">imageComputerHeight</span><span class="p">,</span> <span class="n">imageComputerWidth</span><span class="p">,</span> <span class="n">semCanvas</span><span class="p">,</span> <span class="n">conditionLabel</span><span class="p">,</span> <span class="n">semGreenCanvas</span> <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">conditionContainer</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span> <span class="o">=</span> <span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span> <span class="o">=</span> <span class="n">imageComputerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span> <span class="o">=</span> <span class="n">imageComputerWidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semCanvas</span> <span class="o">=</span> <span class="n">semCanvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionLabel</span> <span class="o">=</span> <span class="n">conditionLabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semGreenCanvas</span> <span class="o">=</span> <span class="n">semGreenCanvas</span>

<div class="viewcode-block" id="ConditionContainer.setConditionLabel"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.setConditionLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setConditionLabel</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="n">name</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ConditionContainer.blinkCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.blinkCondition">[docs]</a>    <span class="k">def</span> <span class="nf">blinkCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">startTime</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">grey</span><span class="p">):</span>
        <span class="n">updateCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semCanvas</span> <span class="k">if</span> <span class="n">grey</span> <span class="o">==</span> <span class="s2">&quot;greyRedSem&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">semGreenCanvas</span>
        <span class="n">currentTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">currentTime</span> <span class="o">&lt;=</span> <span class="n">startTime</span> <span class="o">+</span> <span class="mi">7</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="k">if</span> <span class="n">red</span> <span class="k">else</span> <span class="s2">&quot;normal&quot;</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="n">grey</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="n">state</span> <span class="p">)</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">400</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blinkCondition</span><span class="p">,</span> <span class="n">startTime</span><span class="p">,</span> <span class="ow">not</span> <span class="n">red</span><span class="p">,</span> <span class="n">grey</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="n">grey</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="p">)</span></div>
    
<div class="viewcode-block" id="ConditionContainer.redrawThreads"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.redrawThreads">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawThreads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">redrawThreads</span><span class="p">()</span></div>

<div class="viewcode-block" id="ConditionContainer.removeCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.removeCondition">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">removeCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span></div>

<div class="viewcode-block" id="ConditionContainer.redrawSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.redrawSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;image</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span><span class="o">*</span><span class="mi">2</span></div>

<div class="viewcode-block" id="ConditionContainer.deleteSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.deleteSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">deleteSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;image</span><span class="si">{</span> <span class="n">tag</span> <span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;text</span><span class="si">{</span> <span class="n">tag</span> <span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="InactiveContainer"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer">[docs]</a><span class="k">class</span> <span class="nc">InactiveContainer</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inactiveContainer</span><span class="p">:</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">image</span><span class="p">:</span> <span class="n">PhotoImage</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">inactiveContainer</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

    <span class="c1">#TODO: dipendenza dal wrapper, da risolvere</span>
<div class="viewcode-block" id="InactiveContainer.drawSingleThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer.drawSingleThread">[docs]</a>    <span class="k">def</span> <span class="nf">drawSingleThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">):</span>
        <span class="c1">#TODO: verificare perchè è stato aggiunto questo lock e se è possibile toglierlo</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">drawSingleThread</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseCondition</span><span class="o">.</span><span class="n">notify_all</span><span class="p">()</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">isReleased</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span></div>

<div class="viewcode-block" id="InactiveContainer.redrawThreads"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer.redrawThreads">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawThreads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">redrawThreads</span><span class="p">()</span></div>

<div class="viewcode-block" id="InactiveContainer.removeCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer.removeCondition">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">removeCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span></div>

<div class="viewcode-block" id="InactiveContainer.deleteSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer.deleteSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">deleteSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;image</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InactiveContainer.redrawSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.InactiveContainer.redrawSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;image</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">+</span> <span class="mi">70</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">+=</span> <span class="mi">100</span></div></div>


<div class="viewcode-block" id="WaitContainer"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer">[docs]</a><span class="k">class</span> <span class="nc">WaitContainer</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">:</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">imageHeight</span> <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">wait_container</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span> <span class="o">=</span> <span class="n">imageHeight</span>
    
<div class="viewcode-block" id="WaitContainer.drawFutureAcquireThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer.drawFutureAcquireThread">[docs]</a>    <span class="k">def</span> <span class="nf">drawFutureAcquireThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;text</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#cd5b45&#39;</span> <span class="p">)</span></div>

<div class="viewcode-block" id="WaitContainer.redrawThreads"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer.redrawThreads">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawThreads</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">redrawThreads</span><span class="p">()</span></div>

<div class="viewcode-block" id="WaitContainer.redrawSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer.redrawSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">redrawSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;image</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">+=</span> <span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s2">&quot;n&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">+=</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span></div>

<div class="viewcode-block" id="WaitContainer.deleteSingle"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer.deleteSingle">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">deleteSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span></div>

<div class="viewcode-block" id="WaitContainer.postAdd"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.WaitContainer.postAdd">[docs]</a>    <span class="nd">@overrides</span><span class="p">(</span><span class="n">AbstractContainer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">postAdd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">canAcquire</span> <span class="o">=</span> <span class="kc">True</span></div></div>
</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Davide Caligiuri, Guido Scarlato.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.2.
    </div>
  </body>
</html>