
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>threadmonitor.view.tk &#8212; ThreadMonitor  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/haiku.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../../index.html">
          <span>ThreadMonitor  documentation</span></a></h1>
        <h2 class="heading"><span>threadmonitor.view.tk</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <h1>Source code for threadmonitor.view.tk</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding=utf-8</span>

<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageTk</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">threadmonitor.view.utils</span> <span class="kn">import</span> <span class="n">getResourceFromName</span>

<div class="viewcode-block" id="ConditionContainer"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer">[docs]</a><span class="k">class</span> <span class="nc">ConditionContainer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">conditionContainer</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">containerHeight</span><span class="p">,</span> <span class="n">imageComputerHeight</span><span class="p">,</span> <span class="n">imageComputerWidth</span><span class="p">,</span> <span class="n">semCanvas</span><span class="p">,</span> <span class="n">conditionLabel</span><span class="p">,</span> <span class="n">semGreenCanvas</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">conditionContainer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span> <span class="o">=</span> <span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span> <span class="o">=</span> <span class="n">imageComputerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span> <span class="o">=</span> <span class="n">imageComputerWidth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semCanvas</span> <span class="o">=</span> <span class="n">semCanvas</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionLabel</span> <span class="o">=</span> <span class="n">conditionLabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semGreenCanvas</span> <span class="o">=</span> <span class="n">semGreenCanvas</span>

<div class="viewcode-block" id="ConditionContainer.setConditionLabel"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.setConditionLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setConditionLabel</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">name</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="n">name</span> <span class="p">)</span></div>

<div class="viewcode-block" id="ConditionContainer.addThreadInCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.addThreadInCondition">[docs]</a>    <span class="k">def</span> <span class="nf">addThreadInCondition</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span> <span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawNewThread</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConditionContainer.removeThreadInCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.removeThreadInCondition">[docs]</a>    <span class="k">def</span> <span class="nf">removeThreadInCondition</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threadObject</span> <span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">threadObject</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">threadObject</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">redrawThread</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="ConditionContainer.redrawThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.redrawThread">[docs]</a>    <span class="k">def</span> <span class="nf">redrawThread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">imageHeight</span> <span class="o">=</span> <span class="mi">0</span> 

        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditionThreads</span><span class="p">:</span>
            <span class="n">tag</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span><span class="n">imageHeight</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span><span class="n">imageHeight</span><span class="o">+</span><span class="p">(</span><span class="mi">100</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">)</span>
            <span class="n">currentWidth</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span><span class="o">*</span><span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="o">=</span><span class="n">currentWidth</span></div>
    
<div class="viewcode-block" id="ConditionContainer.drawNewThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.drawNewThread">[docs]</a>    <span class="k">def</span> <span class="nf">drawNewThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">thread</span><span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="n">imageHeight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span><span class="n">imageHeight</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span><span class="n">imageHeight</span><span class="o">+</span><span class="p">(</span><span class="mi">100</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="s2">&quot;Times 10 &quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span><span class="o">*</span><span class="mi">2</span></div>

<div class="viewcode-block" id="ConditionContainer.blinkCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.ConditionContainer.blinkCondition">[docs]</a>    <span class="k">def</span> <span class="nf">blinkCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">startTime</span><span class="p">,</span><span class="n">red</span><span class="p">,</span><span class="n">grey</span><span class="p">):</span>
        <span class="n">updateCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">semCanvas</span> <span class="k">if</span> <span class="n">grey</span> <span class="o">==</span> <span class="s2">&quot;greyRedSem&quot;</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">semGreenCanvas</span>
        <span class="n">currentTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">currentTime</span><span class="o">&lt;=</span><span class="n">startTime</span><span class="o">+</span><span class="mi">7</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="k">if</span> <span class="n">red</span> <span class="k">else</span> <span class="s2">&quot;normal&quot;</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="n">grey</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">blinkCondition</span><span class="p">,</span><span class="n">startTime</span><span class="p">,</span><span class="ow">not</span> <span class="n">red</span><span class="p">,</span><span class="n">grey</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updateCanvas</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="n">grey</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">_InactiveContainer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inactiveContainer</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">inactiveContainer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>

    <span class="k">def</span> <span class="nf">addThreadInactive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawNewThread</span><span class="p">(</span><span class="n">thread</span><span class="p">,</span><span class="n">lock</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">removeThreadInactive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">threadObject</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">threadObject</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">threadObject</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">redrawThread</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">redrawThread</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">currentWidth</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThreads</span><span class="p">:</span>
            <span class="n">tag</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">)</span>
            <span class="n">currentWidth</span><span class="o">+=</span><span class="mi">100</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="o">=</span><span class="n">currentWidth</span>
    
    <span class="k">def</span> <span class="nf">drawNewThread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span><span class="n">tag</span><span class="o">=</span><span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentWidth</span> <span class="o">+=</span><span class="mi">100</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseCondition</span><span class="o">.</span><span class="n">notify_all</span><span class="p">()</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">isReleased</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">lock</span><span class="o">.</span><span class="n">releaseLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">_WaitContainer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">:</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">imageHeight</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">wait_container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waitThreads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span> <span class="o">=</span> <span class="n">imageHeight</span>
    
    <span class="k">def</span> <span class="nf">addThreadInWait</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">lock</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">waitThreads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawNewThread</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
            <span class="n">lock</span><span class="o">.</span><span class="n">canAquire</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">removeThreadInWait</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">threadObject</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">lock</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitThreads</span><span class="p">:</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;text</span><span class="si">{</span><span class="n">tag</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">waitThreads</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">threadObject</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redrawThread</span><span class="p">()</span>
    
    <span class="k">def</span> <span class="nf">redrawThread</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">currentHeight</span> <span class="o">=</span> <span class="mi">0</span>
        
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitThreads</span><span class="p">:</span>
        
            <span class="n">tag</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
            <span class="n">currentWidth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span> <span class="n">currentHeight</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
            <span class="n">currentHeight</span> <span class="o">+=</span> <span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="n">currentWidth</span><span class="p">,</span> <span class="n">currentHeight</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s2">&quot;n&quot;</span> <span class="p">)</span>
            <span class="n">currentHeight</span> <span class="o">+=</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">=</span> <span class="n">currentHeight</span>
    
    <span class="k">def</span> <span class="nf">drawNewThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="n">currentWidth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="o">+=</span><span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">currentWidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s2">&quot;n&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeight</span> <span class="o">+=</span><span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageHeight</span>

    <span class="k">def</span> <span class="nf">drawFutureAcquireThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;text</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;#cd5b45&#39;</span> <span class="p">)</span>

<div class="viewcode-block" id="Controller"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller">[docs]</a><span class="k">class</span> <span class="nc">Controller</span><span class="p">:</span>
    
    <span class="n">FINISH</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">DESTRA</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">SINISTRA</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">INDEX_WAIT_CONTAINER</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">INDEX_LOCK_CONTAINER</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">isStopped</span> <span class="o">=</span> <span class="kc">False</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepLock</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">,</span> <span class="n">stepCondition</span><span class="p">:</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;graphthreading&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepLock</span> <span class="o">=</span> <span class="n">stepLock</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepCondition</span> <span class="o">=</span> <span class="n">stepCondition</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen_heigth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pad</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">x</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pad</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_heigth</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pad</span> <span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">started</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startCondition</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">startLock</span><span class="p">)</span>
        <span class="c1">### INIZIALIZZAZIONE LOGICA ###</span>

        <span class="c1">### hashMap contenente come chiave il nome del lock, e come valore il relativo canvas ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span> <span class="o">=</span> <span class="p">{}</span>
        
        <span class="c1">### In quale container è conenuto al momento il thread ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threadContainer</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1">### wait container associato a uno specifico lock ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waitContainer</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1">### Lista dei threads ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">### Lista dei thread inattivi ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveThread</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">### Lista dei thread in wait su un determinato lock ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waitThread</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1">### PUNTI DI PARTENZA DEI CONTAINERS ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentOrientPosition</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightPosition</span> <span class="o">=</span> <span class="mi">200</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightLeftPosition</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightRightPosition</span> <span class="o">=</span> <span class="mi">200</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="o">/</span><span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">40</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waitHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lockHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">70</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveWidth</span> <span class="o">=</span> <span class="mi">500</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">releasingLock</span> <span class="o">=</span> <span class="p">[]</span>
       
        <span class="c1">### Lista di tutti i container creati ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">### Contiene come chiave gli scroll, e come valore gli oggetti a cui sono attaccati ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrolls</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">conditions</span> <span class="o">=</span> <span class="p">[]</span>
       
        <span class="c1">### Inizializzazione inactive Frame ###</span>
        
        <span class="c1">#self.inactiveFrame=Frame(self.window,background=&#39;#ff1a1a&#39;)</span>
        <span class="c1">#self.inactiveFrame.pack(fill=BOTH)</span>
        
        <span class="c1">### Inizializzazione primaryCanvas ###</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_heigth</span><span class="p">,</span> <span class="n">background</span> <span class="o">=</span> <span class="s1">&#39;grey&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">background</span> <span class="o">=</span> <span class="s1">&#39;#A0A0A0&#39;</span><span class="p">,</span> <span class="n">highlightthickness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">highlightbackground</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yscroll</span> <span class="o">=</span> <span class="n">Scrollbar</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="n">VERTICAL</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yscroll</span><span class="p">[</span><span class="s1">&#39;command&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">yview</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yscroll</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span> <span class="n">side</span> <span class="o">=</span> <span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">Y</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">[</span><span class="s1">&#39;yscrollcommand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yscroll</span><span class="o">.</span><span class="n">set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">background</span> <span class="o">=</span> <span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">highlightthickness</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">highlightbackground</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveWidth</span> <span class="p">)</span>
        <span class="n">changeThreadButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Change thread name&quot;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createPopupThread</span> <span class="p">)</span>
        <span class="n">changeThreadButton</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveScroll</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="p">,</span> <span class="n">orient</span> <span class="o">=</span> <span class="n">HORIZONTAL</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="o">.</span><span class="n">xview</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveScroll</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.93</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">305</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;center&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">xscrollcommand</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveScroll</span><span class="o">.</span><span class="n">set</span> <span class="p">)</span>
        <span class="c1">#self.inactiveCanvas.pack(anchor=&#39;center&#39;,pady=10)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="s1">&#39;background.png&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="p">)</span>
        <span class="c1">#self.primaryCanvas.create_image(0,0,image=self.background,anchor=&#39;n&#39;)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">playButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;play&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">play</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;pause&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextStepButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;next step&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nextStep</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;disabled&#39;</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">playButton</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.93</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.02</span><span class="p">,</span> <span class="n">relheight</span> <span class="o">=</span> <span class="mf">0.025</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopButton</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.93</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.045</span><span class="p">,</span> <span class="n">relheight</span> <span class="o">=</span> <span class="mf">0.025</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextStepButton</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.93</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.070</span><span class="p">,</span> <span class="n">relheight</span> <span class="o">=</span> <span class="mf">0.025</span> <span class="p">)</span>

        <span class="c1">### Inizializzazioni immagini ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span> <span class="o">=</span> <span class="mi">32</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span> <span class="o">=</span> <span class="mi">32</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="s1">&#39;computer.png&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span> <span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">redSem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="s1">&#39;redSem.png&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redSem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">redSem</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redSem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">redSem</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="s1">&#39;greenSem.png&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span> <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">greySem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span> <span class="n">getResourceFromName</span><span class="p">(</span><span class="s1">&#39;greySem.png&#39;</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greySem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">greySem</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">greySem</span> <span class="o">=</span> <span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span> <span class="n">master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">greySem</span> <span class="p">)</span>
       
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span> <span class="s1">&#39;WM_DELETE_WINDOW&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__onclose</span> <span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveData</span> <span class="o">=</span> <span class="n">_InactiveContainer</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span> <span class="p">)</span>

<div class="viewcode-block" id="Controller.play"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.play">[docs]</a>    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">stepLock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nextStepButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;disabled&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">isStopped</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">background</span> <span class="o">=</span> <span class="s1">&#39;#A0A0A0&#39;</span> <span class="p">)</span>
            <span class="k">for</span> <span class="n">lock</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">lock</span><span class="o">.</span><span class="n">playController</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>          
            <span class="bp">self</span><span class="o">.</span><span class="n">stepCondition</span><span class="o">.</span><span class="n">notifyAll</span><span class="p">()</span></div>
    
    <span class="c1">#TODO: modifica di variabili senza sincronizzazione, è quello che vogliamo?</span>
<div class="viewcode-block" id="Controller.stop"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.stop">[docs]</a>    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nextStepButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">isStopped</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">background</span> <span class="o">=</span> <span class="s1">&#39;#696969&#39;</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">lock</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">lock</span><span class="o">.</span><span class="n">playController</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="Controller.nextStep"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.nextStep">[docs]</a>    <span class="k">def</span> <span class="nf">nextStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">stepLock</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stepCondition</span><span class="o">.</span><span class="n">notifyAll</span><span class="p">()</span></div>
    
    <span class="c1">#no synchronization (look to StopAndPlay.run)</span>
<div class="viewcode-block" id="Controller.decreaseStep"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.decreaseStep">[docs]</a>    <span class="k">def</span> <span class="nf">decreaseStep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">-=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="Controller.changeThreadName"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.changeThreadName">[docs]</a>    <span class="k">def</span> <span class="nf">changeThreadName</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">textField</span><span class="p">,</span> <span class="n">menu</span><span class="p">,</span> <span class="n">button</span> <span class="p">):</span>
        <span class="n">threads</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="n">threads</span><span class="p">[</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="n">thread</span>
        <span class="n">threads</span><span class="p">[</span> <span class="n">label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">textField</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span> <span class="s1">&#39;end-1c&#39;</span> <span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Name modified!&#39;</span> <span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="n">calling_data</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">textField</span><span class="p">,</span> <span class="n">button</span> <span class="p">)</span>
            <span class="n">menu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span> <span class="n">label</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">command</span> <span class="o">=</span> <span class="n">calling_data</span> <span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;disabled&#39;</span> <span class="p">)</span>
        <span class="n">textField</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;disabled&#39;</span> <span class="p">)</span></div>
        
<div class="viewcode-block" id="Controller.createPopupThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.createPopupThread">[docs]</a>    <span class="k">def</span> <span class="nf">createPopupThread</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">Toplevel</span><span class="p">()</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span> <span class="s1">&#39;Change thread name&#39;</span> <span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span> <span class="s1">&#39;400x200&#39;</span> <span class="p">)</span>
        <span class="n">menu</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span> <span class="n">popup</span> <span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">config</span><span class="p">(</span> <span class="n">menu</span> <span class="o">=</span> <span class="n">menu</span> <span class="p">)</span>
        <span class="n">threadBar</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">(</span> <span class="n">menu</span><span class="p">,</span> <span class="n">tearoff</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">)</span>
        <span class="n">label</span><span class="o">=</span><span class="n">Label</span><span class="p">(</span> <span class="n">popup</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="n">textField</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span> <span class="n">popup</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s1">&#39;disabled&#39;</span> <span class="p">)</span>
        <span class="n">textField</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mf">0.40</span><span class="p">,</span> <span class="n">relheight</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">relwidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="n">changeThreadNameData</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeThreadName</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">textField</span><span class="p">,</span> <span class="n">threadBar</span> <span class="p">)</span>      
        <span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="n">popup</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Change name&#39;</span> <span class="p">)</span>
        <span class="n">changeThreadNameData</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">changeThreadName</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">textField</span><span class="p">,</span> <span class="n">threadBar</span><span class="p">,</span> <span class="n">button</span> <span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">command</span> <span class="o">=</span> <span class="n">changeThreadNameData</span> <span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span> <span class="p">)</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="n">calling_data</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">setLabel</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">textField</span><span class="p">,</span> <span class="n">button</span> <span class="p">)</span>
            <span class="n">threadBar</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span> <span class="n">label</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">command</span> <span class="o">=</span> <span class="n">calling_data</span> <span class="p">)</span>
        <span class="n">menu</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Select thread&#39;</span><span class="p">,</span> <span class="n">menu</span> <span class="o">=</span> <span class="n">threadBar</span> <span class="p">)</span>       
        <span class="n">popup</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>

<div class="viewcode-block" id="Controller.setLabel"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setLabel</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">textField</span><span class="p">,</span> <span class="n">button</span> <span class="p">):</span>
        <span class="n">label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="n">text</span> <span class="p">)</span>
        <span class="n">textField</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Controller.createPopupLock"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.createPopupLock">[docs]</a>    <span class="k">def</span> <span class="nf">createPopupLock</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">label</span> <span class="p">):</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">Toplevel</span><span class="p">()</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">title</span><span class="p">(</span> <span class="n">label</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span> <span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span> <span class="s1">&#39;400x100&#39;</span> <span class="p">)</span>
        <span class="n">textField</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span> <span class="n">popup</span> <span class="p">)</span>
        <span class="n">textField</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">relheight</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">relwidth</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">)</span>
        <span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span> <span class="n">popup</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Change name&#39;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">(</span> <span class="n">label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="n">textField</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;1.0&#39;</span><span class="p">,</span><span class="s1">&#39;end-1c&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
        <span class="n">button</span><span class="o">.</span><span class="n">place</span><span class="p">(</span> <span class="n">relx</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span> <span class="p">)</span>
        <span class="n">popup</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>

<div class="viewcode-block" id="Controller.addThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.addThread">[docs]</a>    <span class="k">def</span> <span class="nf">addThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span></div>

<div class="viewcode-block" id="Controller.setLockName"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setLockName">[docs]</a>    <span class="k">def</span> <span class="nf">setLockName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">lock_data</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">lock_label</span> <span class="o">=</span> <span class="n">lock_data</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
        <span class="n">lock_label</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Controller.addLock"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.addLock">[docs]</a>    <span class="k">def</span> <span class="nf">addLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
        <span class="c1">### creo il container e lo aggiungo alla lista di container ###</span>
        
        <span class="n">container</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="n">highlightthickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">highlightbackground</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="p">)</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">containers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>

        <span class="c1">### creo il container che mostra il thread che ha acquisito il lok ###</span>
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">container</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lockHeight</span><span class="p">)</span>
        <span class="n">lockLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">lock_container</span><span class="p">,</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Lock &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">lock</span><span class="o">.</span><span class="n">getId</span><span class="p">()))</span>
        <span class="n">lockLabel</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">rely</span><span class="o">=</span><span class="mf">0.80</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,(</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">lock_container</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
        
        <span class="c1">### creo il container che mostra i thread in wait ###</span>
        <span class="n">waitContainer</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">container</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;#fff7dc&#39;</span><span class="p">,</span><span class="n">highlightthickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">highlightbackground</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waitHeight</span><span class="p">)</span>
        <span class="n">container</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,(</span><span class="mi">0</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">waitContainer</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span><span class="c1">#.place(relx=0.5,anchor=&#39;center&#39;,rely=0.25, relheight=0.50,relwidth=1)</span>
        <span class="n">waitLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">waitContainer</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Wait threads&#39;</span><span class="p">)</span>
        <span class="n">waitLabel</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">rely</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;nw&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">waitContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span><span class="o">=</span><span class="n">waitContainer</span>

        <span class="c1">### creo i semafori che mostrano lo stato attuale del lock ###</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">90</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="o">*</span><span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">redSem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;redSem&quot;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">90</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="o">*</span><span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greySem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greyRedSem&quot;</span><span class="p">)</span>

        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">90</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greenSem&quot;</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">90</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="o">*</span><span class="p">(</span><span class="mi">60</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greySem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greyGreenSem&quot;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span><span class="p">)</span>

        <span class="c1">### creo lo scroll del canvas per i thread in wait ###</span>
        <span class="n">scroll</span> <span class="o">=</span> <span class="n">Scrollbar</span><span class="p">(</span><span class="n">waitContainer</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="n">VERTICAL</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">waitContainer</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
        <span class="n">scroll</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">rely</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">relheight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;e&#39;</span><span class="p">)</span>
        <span class="n">waitContainer</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">yscrollcommand</span><span class="o">=</span><span class="n">scroll</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scrolls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">scroll</span><span class="p">)</span>
        
        <span class="n">wait_data</span> <span class="o">=</span> <span class="n">_WaitContainer</span><span class="p">(</span><span class="n">waitContainer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">)</span>

        <span class="c1">### associo al lock i relativi container ###</span>
        <span class="n">conditionContainers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">currentHeightCanvas</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="n">lock_container</span><span class="p">,</span><span class="n">wait_data</span><span class="p">,</span><span class="n">conditionContainers</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">currentHeightPosition</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">currentOrientPosition</span><span class="o">%</span><span class="mi">2</span><span class="p">,</span><span class="n">lockLabel</span><span class="p">,</span><span class="n">currentHeightCanvas</span><span class="p">,</span><span class="n">container</span><span class="p">]</span>
        
        <span class="c1">### aggiorno le variabili per il posizionamento ###</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentOrientPosition</span><span class="o">+=</span><span class="mi">1</span></div>
        
<div class="viewcode-block" id="Controller.addCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.addCondition">[docs]</a>    <span class="k">def</span> <span class="nf">addCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">condition</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
        <span class="c1">### prendo il container principale del lock a cui è associata la condition ###</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>

        <span class="c1">### prendo i dati utili a creare la window per la condition ###</span>
        <span class="n">current_height</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">current_height</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span>
        <span class="n">container_data</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">=</span><span class="n">current_height</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="n">current_height</span><span class="p">)</span>

        <span class="c1">### prendo il container delle condition associate al lock ###</span>
        <span class="n">conditionContainers</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1">### creo il canvas relativo alla condition che sto aggiungendo ###</span>
        <span class="n">conditionContainer</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">lock_container</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;#ffc04c&#39;</span><span class="p">,</span><span class="n">highlightthickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">highlightbackground</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">/</span><span class="mi">2</span><span class="p">,(</span><span class="mi">100</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="n">current_height</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">conditionContainer</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)</span>
        <span class="n">semCanvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">lock_container</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;#ffc04c&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">80</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">current_height</span><span class="o">-</span><span class="p">(</span><span class="mi">45</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">semCanvas</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
        <span class="n">semCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">redSem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;redSem&quot;</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">semCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greySem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greyRedSem&quot;</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">semCanvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ONE&quot;</span><span class="p">)</span>

        <span class="n">semGreenCanvas</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">lock_container</span><span class="p">,</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;#ffc04c&#39;</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">17</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">*</span><span class="p">(</span><span class="mi">20</span><span class="o">/</span><span class="mi">100</span><span class="p">),</span><span class="n">current_height</span><span class="o">-</span><span class="p">(</span><span class="mi">45</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">semGreenCanvas</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
        <span class="n">semGreenCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greenSem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greenSem&quot;</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">semGreenCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">greySem</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;greyGreenSem&quot;</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
        <span class="n">semGreenCanvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;ALL&quot;</span><span class="p">)</span>


        <span class="n">conditionLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">conditionContainer</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;Condition &#39;</span><span class="o">+</span><span class="n">condition</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">conditionLabel</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">rely</span><span class="o">=</span><span class="mf">0.70</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
        <span class="n">scroll</span> <span class="o">=</span> <span class="n">Scrollbar</span><span class="p">(</span><span class="n">conditionContainer</span><span class="p">,</span><span class="n">orient</span><span class="o">=</span><span class="n">HORIZONTAL</span><span class="p">,</span><span class="n">command</span><span class="o">=</span><span class="n">conditionContainer</span><span class="o">.</span><span class="n">xview</span><span class="p">)</span>
        <span class="n">scroll</span><span class="o">.</span><span class="n">place</span><span class="p">(</span><span class="n">relx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">rely</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">relwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;sw&#39;</span><span class="p">)</span>
        <span class="n">conditionContainer</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">xscrollcommand</span><span class="o">=</span><span class="n">scroll</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
        <span class="n">conditionData</span> <span class="o">=</span> <span class="n">ConditionContainer</span><span class="p">(</span><span class="n">conditionContainer</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">conditionHeight</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerWidth</span><span class="p">,</span><span class="n">semCanvas</span><span class="p">,</span><span class="n">conditionLabel</span><span class="p">,</span><span class="n">semGreenCanvas</span><span class="p">)</span>
        <span class="c1">### inserisco la condition nel container ###</span>
        <span class="n">conditionContainers</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span><span class="o">=</span><span class="n">conditionData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conditions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conditionContainer</span><span class="p">)</span></div>

<div class="viewcode-block" id="Controller.setConditionName"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setConditionName">[docs]</a>    <span class="k">def</span> <span class="nf">setConditionName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">condition</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="n">lock_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">conditionContainer</span> <span class="o">=</span> <span class="n">lock_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">conditionContainer</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span><span class="o">.</span><span class="n">setConditionLabel</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__moveFromInactiveToWait</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">startTime</span> <span class="p">):</span>
       
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tag</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">height</span><span class="o">-</span><span class="p">(</span><span class="mi">10</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span> <span class="p">:</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="n">tag</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromInactiveToWait</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">startTime</span> <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">SINISTRA</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tag</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="p">(</span> <span class="p">(</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="p">):</span>
                    
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="n">tag</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromInactiveToWait</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">startTime</span> <span class="p">)</span>
                
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wait_container</span><span class="o">.</span><span class="n">addThreadInWait</span><span class="p">(</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
            
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tag</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="p">(</span> <span class="p">(</span><span class="mi">70</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="p">):</span>
            
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="n">tag</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromInactiveToWait</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">wait_container</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">startTime</span> <span class="p">)</span>
            
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wait_container</span><span class="o">.</span><span class="n">addThreadInWait</span><span class="p">(</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">)</span>
                    <span class="n">lock</span><span class="o">.</span><span class="n">canAcquire</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="n">tag</span> <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__moveInLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tagImage</span><span class="p">,</span> <span class="n">tagText</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">alreadyCalled</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">SINISTRA</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">16</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">alreadyCalled</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
                        <span class="n">alreadyCalled</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">container</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tagImage</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tagText</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveInLock</span><span class="p">,</span><span class="n">tagImage</span><span class="p">,</span> <span class="n">tagText</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">alreadyCalled</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tagText</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">container</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span><span class="o">-</span><span class="mi">32</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">alreadyCalled</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
                        <span class="n">alreadyCalled</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">container</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tagImage</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tagText</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveInLock</span><span class="p">,</span><span class="n">tagImage</span><span class="p">,</span> <span class="n">tagText</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">alreadyCalled</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tagImage</span><span class="p">)</span>
                <span class="n">container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tagText</span><span class="p">)</span>
                

    <span class="k">def</span> <span class="nf">__moveFromLockToInactive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">):</span>
        
        <span class="k">if</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">SINISTRA</span> <span class="ow">and</span>  <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">DESTRA</span> <span class="ow">and</span>  <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;</span><span class="p">(</span><span class="mi">95</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">DESTRA</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;=</span><span class="p">((</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="p">)</span><span class="o">+</span><span class="p">((</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">inactiveWidth</span><span class="p">):</span><span class="c1"># and (self.primaryCanvas.coords(&#39;inactiveimage&#39;+thread)[0]&lt;=(50/100)*self.screen_width):                    self.primaryCanvas.move(tag,1,0)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">SINISTRA</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">coords</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;=</span><span class="p">((</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span><span class="p">)</span><span class="o">-</span><span class="p">((</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">inactiveWidth</span><span class="p">):</span><span class="c1"># and self.primaryCanvas.coords(&#39;inactiveimage&#39;+thread)[0]&gt;=(50/100)*self.screen_width:                    self.primaryCanvas.move(tag,1,0)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__moveFromLockToInactive</span><span class="p">,</span><span class="n">tag</span><span class="p">,</span><span class="n">thread</span><span class="p">,</span><span class="n">orient</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">container</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;inactiveimage&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">inactiveData</span><span class="o">.</span><span class="n">addThreadInactive</span><span class="p">(</span><span class="n">thread</span><span class="p">,</span><span class="n">lock</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">releasingLock</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">lock</span><span class="p">)</span>
                    <span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>         
                    <span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="s1">&#39;greyGreenSem&#39;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s2">&quot;hidden&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Controller.setWaitThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setWaitThread">[docs]</a>    <span class="k">def</span> <span class="nf">setWaitThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">started</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">started</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">startCondition</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
        
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        
        <span class="n">tag_param</span> <span class="o">=</span> <span class="s2">&quot;wait</span><span class="si">{0}{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">lock</span><span class="o">.</span><span class="n">getId</span><span class="p">())</span> <span class="p">)</span>
        <span class="n">val_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span>
        <span class="n">anchor_param</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">val_x</span><span class="p">,</span> <span class="p">(</span><span class="mi">105</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">tag_param</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="n">anchor_param</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">val_x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;image</span><span class="si">{</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="n">anchor_param</span> <span class="p">)</span>
        
        <span class="n">wait_data</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  
        <span class="n">height</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">((</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span><span class="p">)</span>
        <span class="n">orient</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

        <span class="n">timeStart</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__moveFromInactiveToWait</span><span class="p">(</span> <span class="n">thread</span><span class="p">,</span> <span class="n">wait_data</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">tag_param</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">timeStart</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveData</span><span class="o">.</span><span class="n">removeThreadInactive</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        
        <span class="n">sleepTime</span> <span class="o">=</span> <span class="p">(</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="p">(</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span><span class="o">/</span><span class="mi">100</span> 
        <span class="k">return</span> <span class="n">sleepTime</span></div>
    
<div class="viewcode-block" id="Controller.setAcquireThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setAcquireThread">[docs]</a>    <span class="k">def</span> <span class="nf">setAcquireThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">):</span>
        
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">tag</span>  <span class="o">=</span> <span class="nb">str</span><span class="p">(</span> <span class="n">thread</span><span class="o">.</span><span class="n">ident</span> <span class="p">)</span>
        <span class="n">wait_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        <span class="n">wait_container</span><span class="o">.</span><span class="n">removeThreadInWait</span><span class="p">(</span> <span class="n">thread</span> <span class="p">)</span>
        
        <span class="n">imageHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">lockHeight</span>
        <span class="n">imageWidth</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span>

        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">imageWidth</span><span class="p">,</span> <span class="n">imageHeight</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;acquireImage&#39;</span><span class="o">+</span><span class="n">tag</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">imageWidth</span><span class="p">,</span> <span class="n">imageHeight</span> <span class="o">+</span> <span class="p">(</span> <span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span> <span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyGreenSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;redSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span></div>
    
<div class="viewcode-block" id="Controller.setAcquireThreadFromCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setAcquireThreadFromCondition">[docs]</a>    <span class="k">def</span> <span class="nf">setAcquireThreadFromCondition</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">condition</span> <span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span> <span class="n">thread</span><span class="o">.</span><span class="n">ident</span> <span class="p">)</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">conditionContainer</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">conditionData</span> <span class="o">=</span> <span class="n">conditionContainer</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span>
        <span class="n">conditionData</span><span class="o">.</span><span class="n">removeThreadInCondition</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">imageHeight</span> <span class="o">=</span> <span class="p">(</span><span class="mi">25</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">lockHeight</span>
        <span class="n">imageWidth</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerWidth</span>
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">imageWidth</span><span class="p">,</span> <span class="n">imageHeight</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;acquireImage&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">imageWidth</span><span class="p">,</span> <span class="n">imageHeight</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span> <span class="o">+</span> <span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyGreenSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;redSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span></div>

<div class="viewcode-block" id="Controller.setThreadInCondition"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setThreadInCondition">[docs]</a>    <span class="k">def</span> <span class="nf">setThreadInCondition</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">condition</span> <span class="p">):</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">conditionContainers</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">conditionData</span> <span class="o">=</span> <span class="n">conditionContainers</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span>
        <span class="n">conditionData</span><span class="o">.</span><span class="n">addThreadInCondition</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="s1">&#39;text&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span> <span class="s1">&#39;acquireImage&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="p">)</span>         
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyGreenSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span></div>

<div class="viewcode-block" id="Controller.setReleaseThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.setReleaseThread">[docs]</a>    <span class="k">def</span> <span class="nf">setReleaseThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">):</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">lock_container</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="p">(</span> <span class="p">(</span><span class="mi">50</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">containerHeight</span> <span class="p">)</span>
        <span class="n">orient</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">tagImage</span> <span class="o">=</span> <span class="s1">&#39;acquireImage&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        <span class="n">tagText</span> <span class="o">=</span> <span class="s1">&#39;text&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        
        <span class="n">tag</span> <span class="o">=</span> <span class="s2">&quot;release&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">orient</span> <span class="o">==</span> <span class="n">Controller</span><span class="o">.</span><span class="n">SINISTRA</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;inactiveimage&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="mi">88</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;inactiveimage&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">ident</span><span class="p">),</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computerImage</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_text</span><span class="p">(</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span><span class="mf">1.2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageComputerHeight</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="n">thread</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="n">tag</span> <span class="o">=</span> <span class="n">tag</span><span class="p">,</span> <span class="n">anchor</span> <span class="o">=</span> <span class="s1">&#39;n&#39;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__moveInLock</span><span class="p">(</span> <span class="n">tagImage</span><span class="p">,</span> <span class="n">tagText</span><span class="p">,</span> <span class="n">orient</span><span class="p">,</span> <span class="n">lock_container</span><span class="p">,</span> <span class="n">lock</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="kc">False</span> <span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span> <span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span> <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;normal&quot;</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">releasingLock</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lock</span><span class="p">)</span>
        <span class="n">lock_container</span><span class="o">.</span><span class="n">after</span><span class="p">(</span> <span class="mi">500</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__blinkLock</span><span class="p">,</span> <span class="n">lock_container</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">lock</span> <span class="p">)</span>
        <span class="n">sleepTime</span> <span class="o">=</span> <span class="p">(</span> <span class="n">height</span> <span class="o">+</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span> <span class="p">)</span> <span class="o">-</span> <span class="p">(</span> <span class="p">(</span><span class="mi">30</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span> <span class="p">)</span> <span class="p">)</span><span class="o">/</span><span class="mi">80</span>
        
        <span class="k">return</span> <span class="n">sleepTime</span></div>
        
<div class="viewcode-block" id="Controller.drawFutureLockThread"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.drawFutureLockThread">[docs]</a>    <span class="k">def</span> <span class="nf">drawFutureLockThread</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">lock</span> <span class="p">):</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">wait_data</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">wait_data</span><span class="o">.</span><span class="n">drawFutureAcquireThread</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span></div>

<div class="viewcode-block" id="Controller.notifyLock"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.notifyLock">[docs]</a>    <span class="k">def</span> <span class="nf">notifyLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">lock</span><span class="p">,</span><span class="n">condition</span><span class="p">,</span><span class="n">isAll</span><span class="p">):</span>
        <span class="n">container_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">lock</span><span class="p">]</span>
        <span class="n">conditionContainer</span> <span class="o">=</span> <span class="n">container_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">conditionData</span> <span class="o">=</span> <span class="n">conditionContainer</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">red</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">grey</span> <span class="o">=</span> <span class="s2">&quot;greyRedSem&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">isAll</span> <span class="k">else</span> <span class="s2">&quot;greyGreenSem&quot;</span>
        <span class="n">conditionData</span><span class="o">.</span><span class="n">blinkCondition</span><span class="p">(</span><span class="n">startTime</span><span class="p">,</span><span class="n">red</span><span class="p">,</span><span class="n">grey</span><span class="p">)</span></div>
    
    <span class="k">def</span> <span class="nf">__blinkCondition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">startTime</span><span class="p">,</span><span class="n">red</span><span class="p">):</span>
        <span class="n">currentTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">currentTime</span><span class="o">&lt;=</span><span class="n">startTime</span><span class="o">+</span><span class="mi">7</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span> <span class="k">if</span> <span class="n">red</span> <span class="k">else</span> <span class="s2">&quot;normal&quot;</span>
            <span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span>
            <span class="n">container</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__blinkCondition</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">startTime</span><span class="p">,</span><span class="ow">not</span> <span class="n">red</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__blinkLock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">container</span><span class="p">,</span><span class="n">currentState</span><span class="p">,</span><span class="n">lock</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">lock</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">releasingLock</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span> <span class="k">if</span> <span class="n">currentState</span> <span class="k">else</span> <span class="s1">&#39;hidden&#39;</span>
            <span class="n">container</span><span class="o">.</span><span class="n">itemconfigure</span><span class="p">(</span><span class="s1">&#39;greyRedSem&#39;</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span> 
            <span class="n">container</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">__blinkLock</span><span class="p">,</span><span class="n">container</span><span class="p">,</span> <span class="ow">not</span> <span class="n">currentState</span><span class="p">,</span><span class="n">lock</span><span class="p">)</span>
        
<div class="viewcode-block" id="Controller.update"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">scrollregion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">scrollregion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">inactiveCanvas</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">))</span> 
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitContainer</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">waitContainer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">scrollregion</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">waitContainer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">container</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">conditions</span><span class="p">:</span>
            <span class="n">container</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">scrollregion</span><span class="o">=</span><span class="n">container</span><span class="o">.</span><span class="n">bbox</span><span class="p">(</span><span class="s2">&quot;all&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Controller.start"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.start">[docs]</a>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">containerData</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lockContainer</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">container</span> <span class="o">=</span> <span class="n">containerData</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
                <span class="n">currentOrient</span><span class="o">=</span><span class="n">containerData</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

                <span class="n">relX</span> <span class="o">=</span> <span class="p">(</span><span class="mi">20</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span> <span class="k">if</span> <span class="n">currentOrient</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">(</span><span class="mi">80</span><span class="o">/</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">screen_width</span>

                <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightLeftPosition</span> <span class="k">if</span> <span class="n">currentOrient</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightRightPosition</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">primaryCanvas</span><span class="o">.</span><span class="n">create_window</span><span class="p">(</span><span class="n">relX</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">window</span><span class="o">=</span><span class="n">container</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s1">&#39;n&#39;</span><span class="p">)</span>
                <span class="n">containerData</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="n">height</span>
                <span class="k">if</span><span class="p">(</span><span class="n">currentOrient</span><span class="o">%</span><span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightRightPosition</span><span class="o">+=</span><span class="n">containerData</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">+</span><span class="mi">30</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">currentHeightLeftPosition</span><span class="o">+=</span><span class="n">containerData</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">+</span><span class="mi">30</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">started</span> <span class="o">=</span> <span class="kc">True</span>
            
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startCondition</span><span class="o">.</span><span class="n">notifyAll</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">__onclose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">threads</span><span class="p">:</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

    <span class="c1">#no synchronization (look to StopAndPlay.run)</span>
<div class="viewcode-block" id="Controller.checkIfStopped"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.Controller.checkIfStopped">[docs]</a>    <span class="k">def</span> <span class="nf">checkIfStopped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkStepsToo</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">checkStepsToo</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">isStopped</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">isStopped</span></div></div>

<div class="viewcode-block" id="singleton"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.singleton">[docs]</a><span class="k">def</span> <span class="nf">singleton</span><span class="p">(</span><span class="n">class_</span><span class="p">):</span>
    <span class="n">instances</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="nf">getinstance</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">class_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
            <span class="n">instances</span><span class="p">[</span><span class="n">class_</span><span class="p">]</span> <span class="o">=</span> <span class="n">class_</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instances</span><span class="p">[</span><span class="n">class_</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">getinstance</span></div>
    

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">lock e condition globali per sincronizzare threading e vista</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">stepLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">stepCondition</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">(</span><span class="n">stepLock</span><span class="p">)</span>
<span class="n">controller</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="n">stepLock</span><span class="p">,</span> <span class="n">stepCondition</span><span class="p">)</span>

<div class="viewcode-block" id="startGraph"><a class="viewcode-back" href="../../../threadmonitor.view.html#threadmonitor.view.tk.startGraph">[docs]</a><span class="k">def</span> <span class="nf">startGraph</span><span class="p">():</span>
    <span class="n">controller</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></div>
</pre></div>

      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        <a class="uplink" href="../../../index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2021, Davide Caligiuri, Guido Scarlato.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.2.
    </div>
  </body>
</html>